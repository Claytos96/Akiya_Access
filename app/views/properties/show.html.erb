<h1 class="m-5 text-center">Property listing</h1>
<div class="row">
  <div class="col-md-6">
    <div class="mb-2">
      <% unless @property.photos.empty? %>
        <%= cl_image_tag(@property.photos.first.key, class: "d-block w-100") %>
      <% end %>
    </div>

    <div class="bg-white p-3 mb-3 rounded-4 bg-secondary-subtle text-secondary-emphasis">
      <% if @property.present? %>
        <div class="caption-box">
          <h3 style="text-align: left;">Information</h3>
          <div>
            <i class="fa-solid fa-house me-3" style="float: left"></i>
            <p style="text-align: left;"><%= @property.property_type %></p>
            <i class="fa-solid fa-bed me-3" style="float: left"></i>
            <p style="text-align: left;"><%= "#{@property.bedrooms} #{@property.bedrooms > 1 ? 'Bedrooms' : 'Bedroom'}" %></p>
            <i class="fa-solid fa-shower me-3" style="float: left"></i>
            <p style="text-align: left;"><%= "#{@property.bathrooms} #{@property.bathrooms > 1 ? 'Bathrooms' : 'Bathroom'}" %></p>
            <i class="fa-regular fa-square me-3" style="float: left"></i>
            <p style="text-align: left; mb-2"><%= "Building size: #{@property.size_building} sq m" %></p>
            <i class="fa-solid fa-square me-3" style="float: left"></i>
            <p style="text-align: left; mb-2"><%= "Land size: #{@property.size_land} sq m" %></p>
          </div>
        </div>
      <% end %>
    </div>

    <div class="bg-white p-3 rounded-4 bg-secondary-subtle text-secondary-emphasis">
      <% if @property.present? %>
        <div>
          <h3>Description</h3>
          <p><%= @property.description %></p>
        </div>
      <% end %>
    </div>
  </div>
  <div class="col-md-6">
    <div class="row row-cols-2">
        <div class="col mb-2">
          <% unless @property.photos.empty? %>
            <%= cl_image_tag(@property.photos.second.key, class: "d-block w-100") %>
          <% end %>
        </div>
        <div class="col mb-2">
          <% if @property.photos.attached? %>
            <%= cl_image_tag(@property.photos.third.key, class: "d-block w-100") %>
          <% end %>
        </div>
        <div class="col mb-2">
          <% if @property.photos.attached? %>
           <%= cl_image_tag(@property.photos.fourth.key, class: "d-block w-100") %>
          <% end %>
        </div>
        <div class="col mb-2">
          <% if @property.photos.attached? %>
            <%= cl_image_tag(@property.photos.fifth.key, class: "d-block w-100") %>
          <% end %>
        </div>
      </div>
      <div class="bg-white p-3 mb-2 rounded-4 bg-secondary-subtle text-secondary-emphasis">
        <div class="details d-flex justify-content-between align-items-end mb-2">
          <%= render "favourites/actions", property: @property, user: current_user %>
            <h3 style="text-start"><%= number_to_currency(@property.price) %></h3>
          <button type="button" class="bg-secondary-subtle border-0 ms-2" data-bs-toggle="modal" data-bs-target="#exampleModal">
            <i class="bi bi-share text-black mb-2"></i>
          </button>
        </div>

        <% if @property.present? %>
          <div class="caption-box">
            <div class="mt-3 mb-3">
              <h5 style="text-align: left;">Year built :   <%= "#{@property.age}" %></h5>
              <h5 style="text-align: left;"><%= "#{@property.address}" %></h5>
            </div>
          </div>
        <% end %>

        <div style="text-align: left;">
          <%= "#{@property.favorite_count} likes, #{@property.view_count} views" %>
        </div>
        <div class="btn consultation">
          <%= link_to 'Book a consultation', new_property_consultation_path(@property) %>
        </div>
      </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Share</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Share your property via social media:</p>
        <div class="share-buttons">
          <a href="https://facebook.com" target="_blank" data-controller="clipboard" data-action="clipboard#copy">
            <button class="share-button facebook">
              <i class="fab fa-facebook-f"></i>
            </button>
          </a>
          <a href="https://twitter.com" target="_blank" data-controller="clipboard" data-action="clipboard#copy">
          <button class="share-button twitter">
            <i class="fab fa-twitter"></i>
          </button>
          </a>
          <a href="https://instagram.com" target="_blank" data-controller="clipboard" data-action="clipboard#copy">
          <button class="share-button instagram">
            <i class="fab fa-instagram"></i>
          </button>
          </a>
        <a href="https://whatsapp.com" target="_blank" data-controller="clipboard" data-action="clipboard#copy">
          <button class="share-button whatsapp">
            <i class="fab fa-whatsapp"></i>
          </button>
          </a>
          <a href="https://messenger.com" target="_blank" data-controller="clipboard" data-action="clipboard#copy">
          <button class="share-button messenger">
            <i class="fa-brands fa-facebook-messenger"></i>
          </button>
          </a>
          <a href="https://gmail.com" target="_blank" data-controller="clipboard" data-action="clipboard#copy">
          <button class="share-button gmail">
            <i class="fa-solid fa-envelope"></i>
          </button>
          </a>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
